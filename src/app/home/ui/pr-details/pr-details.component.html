<div *ngIf="pullRequest()" class="row mb-4">
  <div class="col-md-12">
    <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#prDetails" aria-expanded="false" aria-controls="prDetails">
      Pull Request Details <i class="bi bi-chevron-down"></i>
    </button>

    <button class="btn btn-secondary ms-3" type="button" data-bs-toggle="collapse" data-bs-target="#aiDetails" aria-expanded="false" aria-controls="aiDetails" *ngIf="codeReviewResponses() && !isLoadingReview()">
      AI Review Details <i class="bi bi-chevron-down"></i>
    </button>

    <div class="collapse mt-3" id="prDetails">
      <div class="card">
        <div class="card-header">Pull Request Information</div>
        <div class="card-body row">
          <div class="col-md-6">
            <h5 class="card-title">{{ pullRequest()?.title }}</h5>
            <p class="card-text"><strong>Description:</strong> {{ pullRequest()?.body || 'No description provided.' }}</p>
            <p class="card-text"><strong>Author:</strong> {{ pullRequest()?.user?.login }}</p>
          </div>
          <div class="col-md-6">
            <p class="card-text"><strong>Created At:</strong> {{ pullRequest()?.created_at | date:'medium' }}</p>
            <p class="card-text"><strong>Last Updated:</strong> {{ pullRequest()?.updated_at | date:'medium' }}</p>
            <p class="card-text"><strong>State:</strong> {{ pullRequest()?.state }}</p>
            <p class="card-text"><strong>Number of Commits:</strong> {{ pullRequest()?.commits }}</p>
            <p class="card-text"><strong>Number of Files Changed:</strong> {{ pullRequest()?.changed_files }}</p>
            <a [href]="pullRequest()?.html_url" class="btn btn-primary" target="_blank">View on GitHub</a>
          </div>
        </div>
      </div>
    </div>

    <div class="collapse mt-3" id="aiDetails">
      <div class="card">
        <div class="card-header">AI Review Information</div>
        <div class="card-body">
          <p><strong>Score:</strong> {{ codeReviewResponses()?.score || 'N/A' }}</p>
          <p><strong>Standards Applied:</strong> {{ codeReviewResponses()?.standards || 'N/A' }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
