<nav class="navbar navbar-expand-lg navbar-dark">
  <div class="container-fluid">
    <a class="logo" href="#">
      <i class="bi bi-github logo-icon"></i>
      <span>odeAI Review</span>
    </a>
    <div class="ms-auto">
      <div class="dropdown">
        <button class="btn btn-link text-light" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-person-circle fs-4"></i>
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
          <li><a class="dropdown-item" href="#" (click)="logout()">Logout</a></li>
        </ul>
      </div>
    </div>
  </div>
</nav>

<div class="container mt-4">
  <!-- Dropdown for selecting repositories -->
  <div class="row mb-4">
    <div class="col-md-6 mb-3 mb-md-0">
      <select class="form-select" aria-label="Select Repository" (change)="onRepoChange($event)">
        <option selected>Select Repository</option>
        <option *ngFor="let repo of repositories" [value]="repo.name">{{ repo.name }}</option>
      </select>
    </div>

    <!-- Dropdown for selecting pull requests -->
    <div class="col-md-6">
      <select class="form-select" aria-label="Select Pull Request" (change)="onPRChange($event)">
        <option selected>Select Pull Request</option>
        <option *ngFor="let pr of pullRequests" [value]="pr.url">{{ pr.title }}</option>
      </select>
    </div>
  </div>

  <!-- Display changes for pull requests -->
  <div class="row mb-4" *ngFor="let file of pullRequestFiles">
    <div class="col-md-6">
      <div class="card h-100">
        <div class="card-header">
          {{ file.filename }}
        </div>
        <div class="card-body">
          <div class="code-block">
            <div *ngFor="let line of file.patch.split('\n'); let i = index">
              <span class="line-number">{{i + 1}}</span>
              <span class="code-content" [ngClass]="{'code-addition': line.startsWith('+'), 'code-deletion': line.startsWith('-')}">{{ line }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card h-100">
        <div class="card-header">
          AI Suggestion for {{ file.filename }}
        </div>
        <div class="card-body">
          <h5 class="card-title">Optimization Suggestion</h5>
          <p class="card-text">Add suggestions for code optimization and improvement here.</p>
        </div>
      </div>
    </div>
  </div>
</div>
